{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst baseUrl = 'https://pixabay.com';\nconst endPoint = '/api';\nconst API_KEY = '48962354-d02229266f1321f72919e6f30';\n\nexport async function getImg(searchName, page, perPage) {\n  const params = new URLSearchParams({\n    key: API_KEY,\n    q: searchName,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: 'true',\n    page,\n    per_page: perPage,\n  });\n\n  const url = `${baseUrl}${endPoint}?${params}`;\n\n  const response = await axios.get(url);\n  return response.data;\n}\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nlet lightbox;\nconst gallery = document.querySelector('.gallery');\n\nexport function showGLR(arrPict, append = false) {\n  if (!append) gallery.innerHTML = '';\n\n  const markup = arrPict\n    .map(\n      image =>\n        `<li class=\"gallery-item\">\n            <a class='gallery-link' href=\"${image.largeImageURL}\">\n              <img class=\"li-img\"\n              src=\"${image.webformatURL}\" \n              alt=\"${image.tags}\"/> \n              <div class=\"li-text\">\n                <table class=\"table\">\n                    <tr><td>Likes</td><td>Views</td><td>Comments</td><td>Downloads</td></tr>\n                    <tr><td>${image.likes}</td><td>${image.views}</td><td>${image.comments}</td><td>${image.downloads}</td></tr>\n                </table>\n              </div>\n            </a>\n        </li>`\n    )\n    .join('');\n\n  gallery.insertAdjacentHTML(append ? 'beforeend' : 'afterbegin', markup);\n\n  if (!lightbox) {\n    lightbox = new SimpleLightbox('.gallery a', {\n      captionsData: 'alt',\n      captionDelay: 250,\n    });\n  } else {\n    lightbox.refresh();\n  }\n}\n\nexport function clearGallery() {\n  gallery.innerHTML = '';\n}\n\nexport function showErrorMessage() {\n  clearGallery();\n  iziToast.show({\n    position: 'topRight',\n    message:\n      'Sorry, there are no images matching your search query. Please try again!',\n    messageColor: 'white',\n    backgroundColor: '#EF4040',\n  });\n}\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport { getImg } from './js/pixabay-api';\nimport { showGLR, showErrorMessage, clearGallery } from './js/render-functions';\n\nexport const form = document.querySelector('.form');\nconst input = document.querySelector('.input-search');\nconst waitMsg = document.querySelector('.wait-msg');\nconst loadMoreBtn = document.querySelector('.load-more-btn');\n\nlet searchQuery = '';\nlet page = 1;\nconst perPage = 40;\nlet totalHits = 0;\n\nform.addEventListener('submit', handleSubmit);\nloadMoreBtn.addEventListener('click', handleLoadMore);\n\nasync function handleSubmit(e) {\n  e.preventDefault();\n  searchQuery = input.value.trim();\n  page = 1;\n\n  if (!searchQuery) {\n    showErrorToast('Input search string');\n    return;\n  }\n\n  input.value = '';\n  clearGallery();\n  hideLoadMoreBtn();\n  showLoader();\n\n  try {\n    const data = await getImg(searchQuery, page, perPage);\n    totalHits = data.totalHits;\n\n    if (!data.hits.length) {\n      showErrorMessage();\n      return;\n    }\n\n    showGLR(data.hits);\n    if (page * perPage < totalHits) {\n      showLoadMoreBtn();\n    }\n  } catch (error) {\n    console.error(error);\n    showErrorToast('Failed to load images. Try again later.');\n  } finally {\n    hideLoader();\n  }\n}\n\nasync function handleLoadMore() {\n  page += 1;\n  showLoader();\n\n  try {\n    const data = await getImg(searchQuery, page, perPage);\n    showGLR(data.hits, true);\n    smoothScroll();\n\n    if (page * perPage >= totalHits) {\n      hideLoadMoreBtn();\n      iziToast.show({\n        position: 'topRight',\n        message: \"We're sorry, but you've reached the end of search results.\",\n        messageColor: 'white',\n        backgroundColor: '#EF4040',\n        timeout: 5000,\n      });\n    }\n  } catch (error) {\n    console.error(error);\n    showErrorToast('Failed to load more images. Try again later.');\n  } finally {\n    hideLoader();\n  }\n}\n\nfunction showLoader() {\n  waitMsg.innerHTML = 'Loading... <span class=\"loader\"></span>';\n}\n\nfunction hideLoader() {\n  waitMsg.textContent = '';\n}\n\nfunction showLoadMoreBtn() {\n  loadMoreBtn.style.display = 'block';\n}\n\nfunction hideLoadMoreBtn() {\n  loadMoreBtn.style.display = 'none';\n}\n\nfunction smoothScroll() {\n  setTimeout(() => {\n    const galleryItem = document.querySelector('.gallery-item');\n    if (galleryItem) {\n      const cardHeight = galleryItem.getBoundingClientRect().height;\n      window.scrollBy({\n        top: cardHeight * 2,\n        behavior: 'smooth',\n      });\n    }\n  }, 300);\n}\n\nfunction showErrorToast(message) {\n  iziToast.show({\n    backgroundColor: '#EF4040',\n    messageColor: '#fff',\n    close: true,\n    position: 'topRight',\n    title: 'Error',\n    titleColor: '#fff',\n    titleSize: '16px',\n    message,\n  });\n}\n"],"names":["baseUrl","endPoint","API_KEY","getImg","searchName","page","perPage","params","url","axios","lightbox","gallery","showGLR","arrPict","append","markup","image","SimpleLightbox","clearGallery","showErrorMessage","iziToast","form","input","waitMsg","loadMoreBtn","searchQuery","totalHits","handleSubmit","handleLoadMore","e","showErrorToast","hideLoadMoreBtn","showLoader","data","showLoadMoreBtn","error","hideLoader","smoothScroll","galleryItem","cardHeight","message"],"mappings":"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"}